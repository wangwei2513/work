<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
<title>输入法</title>
<link rel="stylesheet" type="text/css" href="css/childGreen_color.css"/>
<script type="text/javascript" src="data.js"></script>
<script type="text/javascript" src="js/childGreen_color.js"></script>

<script type="text/javascript"> 
var focusArea = 0; //0,键盘区域，1，文本选择区域，2，确定按钮, 3文本箭头，4，展开文本,5，文本框区域
var tempfocusArea = 0;
var keyPos = 0;		// 键盘区域焦点位置
var specialArr = [];
var letterArr = [];
var ehStr = "";
var ulStr = "";
var speicalPage = 0;
var isUL = 0;   //0是小写，1是大写
var inputValue = "";
var tempLetter = "";
var wordArr = [];
var currWordPage = 1;
var wordPage = 0;
var wordPos = 0;
var isExpansion = 0; //是否展开文本显示
var navigatorFlag = (navigator.appName.indexOf("iPanel") != -1)?"iPanel":"other";
var isAdvanceFlag = navigator.userAgent.toLowerCase().indexOf("advanced")>=0?true:false;	//判断是否是advance版本
var tabW = 61;
var beforeArr = [];
var tempT6Value = "";  	//t6中的字符串
var modeFlag = 0;  		//0是全部，1是单字
var isJhPos = 0;   		//0未激活，1,已激活
var gbPos = 0;
var keyboardLanguageArr = ["cn","en","bihua"];
var keyboardStyle = 0;	// 键盘字母排序方式 0：实际键盘排序 1：a~z排序
var keyType = 1;		//isEng的值
var defaults = {
	outzIndex:999,
	outbgColor:"#778f2d", //退出是的颜色
	color:"#fffffd",	//焦点在的除箭头以外的文字颜色
	selectbgColor:"#f6c431",//焦点背景颜色
	selectColor:"#020300",//焦点在的箭头颜色
	inputValue:"",      //字符串数据
	intr:"",			//初始化文本框描叙符号
	dict:"",  			//词库
	type:0,   			//type为0则是字符串输入模式，为1是密码模式
	strLength:20, 		//选中的字符串长度
	isEng:1,  			//0是英文，1是中文,2,笔画
	isWebkit:1,         //是否有需要2d元素，主要用户调用页面有2d元素，层级问题，1表示需要，0表示不需要 （可以去掉）
	duration:"100ms",
	htmlDom:null,
	reqIp:"",
	callback:function(){},
	backmethod:function(){}
};

var reqIp = "";
function init(){
	initParam(parent.inputObj);
	inputValue = defaults.inputValue;
	gbPos = inputValue.length;
	iDebug("defaults.strLength==="+defaults.strLength);
	var re = "";
	if(navigatorFlag=="iPanel" && !isAdvanceFlag){
		re = /[^\u2E80-\uFE4F]/;		//iPanel匹配中文不一样，要加个非判断
	}else{//chrome,advance
		re = /[\u2E80-\uFE4F]+/;
	}
	var str = inputValue.substring(inputValue.length-1);
	if(re.test(str)){
		getWordData(str);
	}
}

//初始化参数
function initParam(o){
	defaults = extend(defaults,o || {});//赋值
	defaults.htmlDom = $("inputValue");
	defaults.htmlDom.innerHTML = defaults.inputValue;
	focusArea = 0;
	keyPos = 8;
	currWordPage = 1;
	wordArr = [];
	wordPage = 0;
	wordPos = 0;
	isExpansion = 0;
	speicalPage = 0;
	beforeArr = [];
	tempT6Value = "";  
	modeFlag = 0;  
	reqIp = defaults.reqIp==""?"http://access.homed.tv/olime":defaults.reqIp;	
	initData();
	initKeyboardData();
	keyMove(0);
	showGB();
	initElementPosition();
}

//初始化文本框
function initData(){
	$("t6").innerHTML = "<span style='font-size:20px;'>全部<br /><span style='font-size:14px; color:"+globalColorConf.changeInputColor +";'>/单字</span></span>";
	$("keyinputFrame").style.zIndex = defaults.outzIndex;
	if(defaults.isWebkit==1){
		$("keyinputFrame").style.webkitTranstionDuration = defaults.duration;
	}
	
	if(defaults.type==1){//如果是密码模式，为英文键盘
		defaults.isEng = 0;	
		if(defaults.strLength==10000000){
			defaults.strLength = 6;
		}
		defaults.intr = "请输入密码";
	}
	// defaults.isEng = keyType;
	if(defaults.type==0){
		var currTempStrLen = getCharacterLength(defaults.inputValue);
		var tempCount = 0;
		var tempFlag = 1;
		for(var i=0;i<defaults.inputValue.length;i++){
			tempCount += getCharacterLength(defaults.inputValue.substring(i,i+1));
			if(tempCount>defaults.strLength){
				inputValue = defaults.inputValue.substring(0,i-1);
				tempFlag = 0;
				break;	
			}	
		}
		if(tempFlag){
			inputValue = defaults.inputValue;	
		}
	}else{
		inputValue = defaults.inputValue.length>defaults.strLength?defaults.inputValue.substring(0,defaults.strLength):defaults.inputValue;
	}
	
	if(inputValue==""){
		window.clearTimeout(gbTimer);
		defaults.htmlDom.innerHTML = defaults.intr;	
	}else{
		showGB();
	}
}

//初始化键盘数据
function initKeyboardData(){
	wordArr = [];
	wordPage = 0;
	currWordPage = 1;
	beforeArr = [];
	if(defaults.isEng==0){
		ehStr = "英<span style='font-size:20px; color:"+globalColorConf.changeInputColor +";'>/拼</span>";
	}else if(defaults.isEng==1){
		ehStr = "拼<span style='font-size:20px; color:"+globalColorConf.changeInputColor +";'>/笔</span>";
	}else{
		ehStr = "笔<span style='font-size:20px; color:"+globalColorConf.changeInputColor +";'>/拼</span>";	
	} 
	
	$("e20").innerHTML = ehStr;
	//拼音状态下两个双引号不成对
	$("t17").style.fontSize = "22px";
	if(defaults.isEng==0){
		if(enSpecialArr.length%19!=0){
			specialArr = enSpecialArr.slice(0).concat(enSpecialArr.slice(0,19-enSpecialArr.length%19));	
		}else{
			specialArr = enSpecialArr.slice(0);
		}
	}else if(defaults.isEng==1){
		//拼音状态下两个双引号不成对
		$("t17").style.fontSize = "36px";
		if(chSpecialArr.length%19!=0){
			specialArr = chSpecialArr.slice(0).concat(chSpecialArr.slice(0,19-chSpecialArr.length%19));	
		}else{
			specialArr = chSpecialArr.slice(0);
		}
	}else if(defaults.isEng==2){
		//拼音状态下两个双引号不成对
		$("t17").style.fontSize = "36px";
		if(chSpecialArr.length%39!=0){
			specialArr = chSpecialArr.slice(0).concat(chSpecialArr.slice(0,39-chSpecialArr.length%39));	
		}else{
			specialArr = chSpecialArr.slice(0);
		}
	}
	if(keyboardStyle==1){
		letterArr = isUL?UletterArrCopy.slice(0):LletterArrCopy.slice(0);
		letterIdArr = letterIdArrCopy.slice(0);
	}else{
		letterArr = isUL?UletterArr.slice(0):LletterArr.slice(0);
		letterIdArr = letterIdArr.slice(0);
	}
	if(defaults.isEng<2){
		ulStr = isUL?"A<span style='font-size:20px; color:"+globalColorConf.changeInputColor +";'>/a</span>":"a<span style='font-size:20px; color:"+globalColorConf.changeInputColor +";'>/A</span>"; 
	}else{
		ulStr = "分词";
	}
	$("e10").innerHTML = ulStr;
	
	if(defaults.isEng>0){
		$("keyinput").style.top = "422px";
		$("keyword").style.visibility = "visible";
		$("r_arrow").style.visibility = "visible";
	}else{
		$("keyinput").style.top = "479px";
		$("keyword").style.visibility = "hidden";
		$("r_arrow").style.visibility = "hidden";	
	}	
	if(defaults.isEng<2){
		iDebug("============keyboardStyle:"+keyboardStyle);
		if(keyboardStyle==1){
			idArr = ecArrCopy.slice(0);
		}else{
			idArr = ecArr.slice(0);
		}
		$("t14").style.backgroundColor = globalColorConf.tdBgColor1;
		$("t14_14").style.backgroundColor = globalColorConf.tdBgColor1;
		$("t14").innerHTML = "<span style='font-size:20px;'>空格</span>";
		showLetter();
	}else{
		idArr = bhArr.slice(0);
		$("e21").style.backgroundColor = globalColorConf.tdBgColor1;
		$("e21_21").style.backgroundColor = globalColorConf.tdBgColor1;
		$("e21").innerHTML = "<span style='font-size:22px;'>空格</span>";
		showStrokes();	
	}
	
	showSpecial();
	
	inputPosition();
	
	initElementPosition();	
}

//输出笔画
function showStrokes(){
	for(var i=0;i<strokesIdArr.length;i++){
		if(strokesIdArr[i].ids.length==2){
			$(strokesIdArr[i].ids[0]).style.backgroundColor = globalColorConf.tdBgColor3;
			$(strokesIdArr[i].ids[1]).style.backgroundColor = globalColorConf.tdBgColor3;	
		}else if(strokesIdArr[i].ids.length==4){
			$(strokesIdArr[i].ids[0]).style.backgroundColor = globalColorConf.tdBgColor3;
			$(strokesIdArr[i].ids[1]).style.backgroundColor = globalColorConf.tdBgColor3;
			$(strokesIdArr[i].ids[2]).style.backgroundColor = globalColorConf.tdBgColor3;
			$(strokesIdArr[i].ids[3]).style.backgroundColor = globalColorConf.tdBgColor3;
		}else{
			$(strokesIdArr[i].ids[0]).style.backgroundColor = globalColorConf.tdBgColor3;
		}
		if(strokesArr[i].txt=="通配"){
			$(strokesIdArr[i].ids[0]).innerHTML = "<span style='font-size:20px;'>"+strokesArr[i].txt+"</span>";			
		}else{
			$(strokesIdArr[i].ids[0]).innerHTML = strokesArr[i].txt;			
		}
		
	}
		
}

//输出字母
function showLetter(){
	for(var i=0;i<letterIdArr.length;i++){
		if(letterIdArr[i].ids.length==2){
			$(letterIdArr[i].ids[0]).style.backgroundColor = globalColorConf.tdBgColor3;
			$(letterIdArr[i].ids[1]).style.backgroundColor = globalColorConf.tdBgColor3;	
		}else if(letterIdArr[i].ids.length==4){
			$(letterIdArr[i].ids[0]).style.backgroundColor = globalColorConf.tdBgColor3;
			$(letterIdArr[i].ids[1]).style.backgroundColor = globalColorConf.tdBgColor3;
			$(letterIdArr[i].ids[2]).style.backgroundColor = globalColorConf.tdBgColor3;
			$(letterIdArr[i].ids[3]).style.backgroundColor = globalColorConf.tdBgColor3;
		}else{
			$(letterIdArr[i].ids[0]).style.backgroundColor = globalColorConf.tdBgColor3;
		}
		$(letterIdArr[i].ids[0]).innerHTML = letterArr[i].txt;	
	}
}

//输出特殊字符
function showSpecial(){
	if(defaults.isEng<2){
		for(var i=0;i<specialIdArr.length;i++){
			if(specialIdArr[i].ids.length==2){
				$(specialIdArr[i].ids[0]).style.backgroundColor = globalColorConf.tdBgColor2 ;
				$(specialIdArr[i].ids[1]).style.backgroundColor = globalColorConf.tdBgColor2 ;	
			}else if(specialIdArr[i].ids.length==4){
				$(specialIdArr[i].ids[0]).style.backgroundColor = globalColorConf.tdBgColor2 ;
				$(specialIdArr[i].ids[1]).style.backgroundColor = globalColorConf.tdBgColor2 ;
				$(specialIdArr[i].ids[2]).style.backgroundColor = globalColorConf.tdBgColor2 ;
				$(specialIdArr[i].ids[3]).style.backgroundColor = globalColorConf.tdBgColor2 ;
			}else{
				$(specialIdArr[i].ids[0]).style.backgroundColor = globalColorConf.tdBgColor2 ;
			}
			if(speicalPage*specialIdArr.length+i<specialArr.length){
				var txt = specialArr[speicalPage*specialIdArr.length+i].txt;
				if(txt.length>1){
					$(specialIdArr[i].ids[0]).innerHTML = "<span style='font-size:18px;'>"+txt+"<span>";		
				}else{
					$(specialIdArr[i].ids[0]).innerHTML = specialArr[speicalPage*specialIdArr.length+i].txt;		
				}
			}else{
				$(specialIdArr[i].ids[0]).innerHTML = "";	
			}
		}
	}else{
		for(var i=0;i<bhspecialIdArr.length;i++){
			if(bhspecialIdArr[i].ids.length==2){
				$(bhspecialIdArr[i].ids[0]).style.backgroundColor = globalColorConf.tdBgColor2 ;
				$(bhspecialIdArr[i].ids[1]).style.backgroundColor = globalColorConf.tdBgColor2 ;	
			}else if(bhspecialIdArr[i].ids.length==4){
				$(bhspecialIdArr[i].ids[0]).style.backgroundColor = globalColorConf.tdBgColor2 ;
				$(bhspecialIdArr[i].ids[1]).style.backgroundColor = globalColorConf.tdBgColor2 ;
				$(bhspecialIdArr[i].ids[2]).style.backgroundColor = globalColorConf.tdBgColor2 ;
				$(bhspecialIdArr[i].ids[3]).style.backgroundColor = globalColorConf.tdBgColor2 ;
			}else{
				$(bhspecialIdArr[i].ids[0]).style.backgroundColor = globalColorConf.tdBgColor2 ;
			}
			if(speicalPage*bhspecialIdArr.length+i<specialArr.length){
				var txt = specialArr[speicalPage*bhspecialIdArr.length+i].txt;
				if(txt.length>1){
					$(bhspecialIdArr[i].ids[0]).innerHTML = "<span style='font-size:18px;'>"+txt+"<span>";		
				}else{
					$(bhspecialIdArr[i].ids[0]).innerHTML = specialArr[speicalPage*bhspecialIdArr.length+i].txt;		
				}
			}else{
				$(bhspecialIdArr[i].ids[0]).innerHTML = "";	
			}
		}	
	}	
}

//确定
function doSelect(){
	console.log(54545)
	if(focusArea==0){ // 键盘区域
		if(idArr[keyPos].type==0){  //数字
			var bl = isIFElseBuffer();
			if(bl) return;
			if(gbPos==inputValue.length){
				inputValue += numIdArr[idArr[keyPos].index].value+"";
				gbPos = inputValue.length;
			}else{
				inputValue = inputValue.substring(0,gbPos)+(numIdArr[idArr[keyPos].index].value+"")+inputValue.substring(gbPos,inputValue.length);
				gbPos = gbPos+(numIdArr[idArr[keyPos].index].value+"").length;
			}
			if(defaults.type == 1){
				showPasswordTxt(function(){showGB();})
			}else{
				showGB();
			}
			inputPosition();
		}else if(idArr[keyPos].type==1){ //字母
			if(defaults.isEng==1){
				if(getCharacterLength(inputValue)==defaults.strLength) return;
				tempLetter += letterArr[idArr[keyPos].index].txt;
				beforeArr = getPinyinArr(tempLetter);
				if(defaults.type == 1){
					showPasswordTxt(function(){showGB();})
				}else{
					showGB();
				}
				getAjaxData(tempLetter);
			}else if(defaults.isEng==0){
				if(getCharacterLength(inputValue)==defaults.strLength) return;
				if(gbPos==inputValue.length){
					inputValue += letterArr[idArr[keyPos].index].txt+"";
					gbPos = inputValue.length;
				}else{
					inputValue = inputValue.substring(0,gbPos)+	letterArr[idArr[keyPos].index].txt+inputValue.substring(gbPos,inputValue.length);
					gbPos = gbPos+letterArr[idArr[keyPos].index].txt.length;
				}
				if(defaults.type == 1){
					showPasswordTxt(function(){showGB();})
				}else{
					showGB();
				}
			}
			inputPosition();
		}else if(idArr[keyPos].type==10){ //笔画
			if(getCharacterLength(inputValue)==defaults.strLength) return;
			if(strokesArr[idArr[keyPos].index].txt=="通配"){
				tempLetter += "*";
			}else{				
				tempLetter += strokesArr[idArr[keyPos].index].txt+"";
			}
			if(defaults.type == 1){
				showPasswordTxt(function(){showGB();})
			}else{
				showGB();
			}
		}else if(idArr[keyPos].type==2){ //特殊字符
			if(keyPos==19 && isExpansion==1){ //单字与全部的切换
				if(modeFlag==0){ //全部切换单字
					modeFlag = 1;	
					$("t6").innerHTML = "<span style='font-size:20px;'>单字<br /><span style='font-size:14px; color:"+globalColorConf.changeInputColor +";'>/全部</span></span>";	
					if(beforeArr.length>0){
						getAjaxData(beforeArr[0]);
					}else{
						if(tempLetter!=""){
							getAjaxData(tempLetter);	
						}	
					}
				}else{ //单字切换全部
					modeFlag = 0;	
					$("t6").innerHTML = "<span style='font-size:20px;'>全部<br /><span style='font-size:14px; color:"+globalColorConf.changeInputColor +";'>/单字</span></span>";
					if(tempLetter!=""){
						getAjaxData(tempLetter);	
					}		
				}
			}else{
				var bl = isIFElseBuffer();
				if(bl) return;
				if(gbPos==inputValue.length){
					inputValue += specialArr[speicalPage*specialIdArr.length+idArr[keyPos].index].txt+"";
					gbPos = inputValue.length;
				}else{
					inputValue = inputValue.substring(0,gbPos)+(specialArr[speicalPage*specialIdArr.length+idArr[keyPos].index].txt+"")+inputValue.substring(gbPos,inputValue.length);
					gbPos = gbPos+(specialArr[speicalPage*specialIdArr.length+idArr[keyPos].index].txt+"").length;
				}
				if(defaults.type == 1){
					showPasswordTxt(function(){showGB();})
				}else{
					showGB();
				}
				inputPosition();
			}
		}else if(idArr[keyPos].type==3){ //空格
			var bl = isIFElseBuffer();
			if(bl) return;
			if(gbPos==inputValue.length){
				inputValue += " ";
				gbPos = inputValue.length;
			}else{
				inputValue = inputValue.substring(0,gbPos)+" "+inputValue.substring(gbPos,inputValue.length);
				gbPos = gbPos+1;
			}
			if(defaults.type == 1){
				showPasswordTxt(function(){showGB();})
			}else{
				showGB();
			}
			inputPosition();
		}else if(idArr[keyPos].type==4){ //中英文切换
			var bl = isIFElseBuffer();
			if(defaults.type==1) return;
			if(defaults.isEng==0){
				defaults.isEng = 1;	
			}else if(defaults.isEng==1){
				defaults.isEng = 2;
			}else{
				defaults.isEng = 0;	
			}
			isUL = 0;  //变成小写
			initKeyboardData();
		}else if(idArr[keyPos].type==5){ //特殊字符翻页
			var bl = isIFElseBuffer();
			if(idArr[keyPos].index==0){
				if(isExpansion==1){ //中文汉字翻页
					wordPageOprea(-1);
				}else{ //字符翻页
					if(speicalPage==0) return;
					speicalPage--;
					showSpecial();	
				}
			}else if(idArr[keyPos].index==1){
				if(isExpansion==1){ //中文汉字翻页
					wordPageOprea(1);
				}else{ //字符翻页
					var len = 0;
					if(defaults.isEng<2){
						len = (speicalPage+1)*specialIdArr.length;
					}else{
						len = (speicalPage+1)*bhspecialIdArr.length;	
					}
					if(len<specialArr.length-1){
						speicalPage++;
						showSpecial();	
					}
				}
			}	
		}else if(idArr[keyPos].type==6){ //大小写切换
			var bl = isIFElseBuffer();
			if(defaults.isEng>0) return;
			if(isUL){ //当前是大写
				isUL = 0;  //变成小写
				defaults.isEng = 0;
				letterArr = LletterArr.slice(0);	
			}else{
				isUL = 1;	
				defaults.isEng = 0;
				letterArr = UletterArr.slice(0);
			}
			initKeyboardData();
		}else if(idArr[keyPos].type==11){ //分词
			
		}
	}else if(focusArea==1){ // 文本选择区域
		if(modeFlag==1){
			var tempWordStr = wordArr[wordPage][wordPos].word;
			if(getCharacterLength(inputValue)+getCharacterLength(tempWordStr)<=defaults.strLength){
				if(gbPos==inputValue.length){
					inputValue += tempWordStr;
					gbPos = inputValue.length;
				}else{
					inputValue = inputValue.substring(0,gbPos)+tempWordStr+inputValue.substring(gbPos,inputValue.length);
					gbPos = gbPos+tempWordStr.length;
				}
				$("word"+wordPage%4+"_"+wordPos).style.backgroundColor = globalColorConf.tdBgColor4;
				$("word"+wordPage%4+"_"+wordPos).style.color = globalColorConf.wordColor;
				if(beforeArr.length>0){
					var removeStr = beforeArr.shift();
					tempLetter = tempLetter.replace(removeStr,"");
				}else{
					tempLetter = "";
					beforeArr = [];	
				}
				if(tempLetter==""){
					getWordData(tempWordStr);	
				}else{
					if(beforeArr.length>0){
						getAjaxData(beforeArr[0]);
					}else{
						getAjaxData(tempLetter);
					}
				}
			}
		}else{
			tempLetter = "";
			var tempWordStr = wordArr[wordPage][wordPos].word;
			if(getCharacterLength(inputValue)+getCharacterLength(tempWordStr)<=defaults.strLength){
				if(gbPos==inputValue.length){
					inputValue += tempWordStr;
					gbPos = inputValue.length;
				}else{
					inputValue = inputValue.substring(0,gbPos)+tempWordStr+inputValue.substring(gbPos,inputValue.length);
					gbPos = gbPos+tempWordStr.length;
				}
				getWordData(tempWordStr);					
			}
			beforeArr = [];		
		}
		if(defaults.type == 1){
			showPasswordTxt(function(){showGB();})
		}else{
			showGB();
		}
		inputPosition();
	}else if(focusArea==2){ // 确定按钮
		isIFElseBuffer();
		$("keyword").style.height = "55px";
		$("t6").innerHTML = tempT6Value; //确定按钮下面的键盘格（除中文显示行）
		wordPage = 0;
		currWordPage = 1;
		isExpansion = 0;
		// $("inputButton").style.backgroundColor = globalColorConf.tdBgColor1;
		// $("inputButton").style.color = globalColorConf.inputButtonColor;
		// initElementPosition();
		wordArr = [];
		wordPage = 0;
		currWordPage = 1;
		beforeArr = [];
		setTimeout(function(){
			defaults.callback(inputValue);	
		},100);
	}else if(focusArea==3){ // 文本箭头
		if(isExpansion==0){
			$("keyword").style.height = "242px";
			tempT6Value = $("t6").innerHTML;
			modeFlag = 0;
			$("t6").innerHTML = "<span style='font-size:20px;'>全部<br /><span style='font-size:14px; color:"+globalColorConf.changeInputColor +";'>/单字</span></span>";	
			isExpansion = 1;
		}else if(isExpansion==1){
			$("keyword").style.height = "55px";
			$("t6").innerHTML = tempT6Value;
			wordPage = 0;
			currWordPage = 1;
			showWord();	
			isExpansion = 0;
		}
	}
}

//返回
function goBack(){
	if((inputValue+tempLetter).length>0){
		if(tempLetter.length>0){
			tempLetter = tempLetter.substring(0,tempLetter.length-1);	
			beforeArr = getPinyinArr(tempLetter);
			getAjaxData(tempLetter);
		}else{
			if(gbPos==inputValue.length){
				inputValue = inputValue.substring(0,inputValue.length-1);		
				gbPos = inputValue.length;
			}else{
				inputValue = inputValue.substring(0,gbPos-1)+inputValue.substring(gbPos,inputValue.length);
				gbPos = gbPos-1;
				if(gbPos<0) gbPos = 0;
			}
			getWordData(inputValue.substring(gbPos-1,gbPos));
		}
		
		
		if(tempLetter!=""){
			showGB();
		}else{
			if(inputValue==""){
				window.clearTimeout(gbTimer);
				defaults.htmlDom.innerHTML = defaults.intr;		
			}else{
				showGB();
			}
		}
		inputPosition();
	}else{
		exitWidget();
	}
}

function exitWidget(){
	if(focusArea==0){
		if(idArr[keyPos].ids.length==2){
			$(idArr[keyPos].ids[0]).style.backgroundColor = defaults.outbgColor;
			$(idArr[keyPos].ids[1]).style.backgroundColor = defaults.outbgColor;	
		}else if(idArr[keyPos].ids.length==4){
			$(idArr[keyPos].ids[0]).style.backgroundColor = defaults.outbgColor;
			$(idArr[keyPos].ids[1]).style.backgroundColor = defaults.outbgColor;
			$(idArr[keyPos].ids[2]).style.backgroundColor = defaults.outbgColor;
			$(idArr[keyPos].ids[3]).style.backgroundColor = defaults.outbgColor;
		}else{
			$(idArr[keyPos].ids[0]).style.backgroundColor = defaults.outbgColor;
		}	
		$(idArr[keyPos].ids[0]).style.color = defaults.color;
	}else if(focusArea==1){
		$("word"+wordPage%4+"_"+wordPos).style.backgroundColor = globalColorConf.tdBgColor4;
		$("word"+wordPage%4+"_"+wordPos).style.color = globalColorConf.wordColor;
	}else if(focusArea==2){
		$("inputButton").style.backgroundColor = globalColorConf.tdBgColor1;
		$("inputButton").style.color = globalColorConf.inputButtonColor;
	}
	for(var i=0;i<4;i++){
		for(var j=0;j<19;j++){
			if(j==0){
				$("wordfirst"+i+"_"+j).innerHTML = "";
			}else{
				$("word"+i+"_"+j).innerHTML = "";
			}
		}	
	}
	initElementPosition();
	setTimeout(function(){
		if(typeof defaults.backmethod) defaults.backmethod(); //确保当前页面方法是否存在
	},100);
	
}



//中文汉字未完全确定，并判断字符串是否超出长度
function isIFElseBuffer(){
	if(defaults.type==0){
		var tempSpeLength = getCharacterLength(inputValue);
	}else{
		var tempSpeLength = inputValue.length;
	}
	if(tempSpeLength==defaults.strLength) return true;
	
	if(tempLetter != ""){
		if(tempSpeLength+tempLetter.length<defaults.strLength){
			if(defaults.isEng<2){
				inputValue += tempLetter;
				gbPos = inputValue.length;
			}
			tempLetter = "";
			beforeArr = [];	
		}	
		if(inputValue.length == defaults.strLength){
			showGB();
			return true;
		}else{
			showGB();
		}
	}
	return false;
}


//光标移动
function GBMove(_num){
	if(gbPos+_num<0) return;
	if(gbPos+_num>inputValue.length){
		if(_num==1){
			$("keyinput").style.backgroundColor = globalColorConf.tdBgColor3;
			$("inputValue").style.color = globalColorConf.inputValueColor;
			showAndHideButton(true);
		}else{
			bottomChangeArea();	
		}
		return;	
	}
	gbPos += _num;
	showGB();
}


//光标
var isGB = false;
var gbTimer = -1;
function showGB(){	
	window.clearTimeout(gbTimer);
	var tempValue = (defaults.type==0?inputValue:getXX(inputValue));
	var tempcolor = focusArea==5?globalColorConf.cursorSelectColor:globalColorConf.cursorColor;
	if(isJhPos==0) {
		if(tempLetter==""){
			if(isGB){
				defaults.htmlDom.innerHTML = tempValue+"<span style='color:"+tempcolor+";'>|</span>";	
				//defaults.htmlDom.innerHTML = tempValue+"|";	
				isGB = false;
			}else{
				defaults.htmlDom.innerHTML = tempValue;	
				isGB = true;
			}
		}else{
			if(isGB){
				defaults.htmlDom.innerHTML = tempValue+"<span style='color:"+tempcolor+";'>"+tempLetter+"|</span>";	
				//defaults.htmlDom.innerHTML = tempValue+"|";	
				isGB = false;
			}else{
				defaults.htmlDom.innerHTML = tempValue+"<span style='color:"+tempcolor+";'>"+tempLetter+"</span>";
				//defaults.htmlDom.innerHTML = tempValue+tempLetter;	
				isGB = true;	
			}
		}
	}else{
		if(tempLetter==""){
			if(isGB){
				if(gbPos==tempValue.length){
					defaults.htmlDom.innerHTML = tempValue+"<span style='color:"+tempcolor+";'>|</span>";	
					//defaults.htmlDom.innerHTML = tempValue+"|";	
				}else{
					defaults.htmlDom.innerHTML = tempValue.substring(0,gbPos)+"<span style='color:"+tempcolor+";'>|</span>"+tempValue.substring(gbPos,tempValue.length);
					//defaults.htmlDom.innerHTML = tempValue.substring(0,gbPos)+"|"+tempValue.substring(gbPos,tempValue.length);
				}
				isGB = false;
			}else{
				if(gbPos==tempValue.length){
					defaults.htmlDom.innerHTML = tempValue;	
				}else{
					defaults.htmlDom.innerHTML = tempValue.substring(0,gbPos)+"<span style='color:"+tempcolor+";'>&nbsp;</span>"+tempValue.substring(gbPos,tempValue.length);
					//defaults.htmlDom.innerHTML = tempValue.substring(0,gbPos)+"&nbsp;"+tempValue.substring(gbPos,tempValue.length);
				}	
				isGB = true;
			}
		}else{
			if(isGB){
				if(gbPos==tempValue.length+tempLetter.length){
					defaults.htmlDom.innerHTML = tempValue+"<span style='color:"+tempcolor+";'>"+tempLetter+"|</span>";	
					//defaults.htmlDom.innerHTML = tempValue+tempLetter+"|";	
				}else{
					defaults.htmlDom.innerHTML = tempValue.substring(0,gbPos)+"<span style='color:"+tempcolor+";'>"+tempLetter+"|</span>"+tempValue.substring(gbPos,tempValue.length);
					//defaults.htmlDom.innerHTML = tempValue.substring(0,gbPos)+tempLetter+"|"+tempValue.substring(gbPos,tempValue.length)
				}
				isGB = false;
			}else{
				if(gbPos==tempValue.length+tempLetter.length){
					defaults.htmlDom.innerHTML = tempValue+"<span style='color:"+tempcolor+";'>"+tempLetter+"</span>";	
					//defaults.htmlDom.innerHTML = tempValue+tempLetter;	
				}else{
					defaults.htmlDom.innerHTML = tempValue.substring(0,gbPos)+"<span style='color:"+tempcolor+";'>"+tempLetter+"&nbsp;</span>"+tempValue.substring(gbPos,tempValue.length);
					//defaults.htmlDom.innerHTML = tempValue.substring(0,gbPos)+tempLetter+"&nbsp;"+tempValue.substring(gbPos,tempValue.length);
				}
				isGB = true;	
			}
		}	
	}
	gbTimer = setTimeout(showGB,500);
}

//密码输出前先显示文本
var passwordTxt = -1;
function showPasswordTxt(_callback){
	if(defaults.type==1){
		var tempcolor = focusArea==5?globalColorConf.cursorSelectColor:globalColorConf.cursorColor;
		if(isJhPos==0) {
			var preTempValue = getXX(inputValue.substring(0,inputValue.length-1));
			var lastTempValue = inputValue.substring(inputValue.length-1);
			if(tempLetter==""){
				defaults.htmlDom.innerHTML = preTempValue+lastTempValue+"<span style='color:"+tempcolor+";'>|</span>";	
				//defaults.htmlDom.innerHTML = tempValue+"|";	
				isGB = false;
			}else{
				preTempValue = getXX(tempLetter.substring(0,tempLetter.length-1));
				lastTempValue = tempLetter.substring(tempLetter.length-1);
				defaults.htmlDom.innerHTML = tempValue+"<span style='color:"+tempcolor+";'>"+preTempValue+lastTempValue+"|</span>";	
				//defaults.htmlDom.innerHTML = tempValue+"|";	
				isGB = false;
			}
		}else{
			var preTempValue = "";
			var lastTempValue = "";

			if(tempLetter==""){
				if(gbPos==tempValue.length){
					preTempValue = getXX(inputValue.substring(0,inputValue.length-1));
					lastTempValue = inputValue.substring(inputValue.length-1);
					defaults.htmlDom.innerHTML = preTempValue+lastTempValue+"<span style='color:"+tempcolor+";'>|</span>";	
					//defaults.htmlDom.innerHTML = tempValue+"|";	
				}else{
					var beforeValue = tempValue.substring(0,gbPos);
					preTempValue = getXX(beforeValue.substring(0,beforeValue.length-1));
					lastTempValue = beforeValue.substring(beforeValue.length-1);
					defaults.htmlDom.innerHTML = preTempValue+lastTempValue+"<span style='color:"+tempcolor+";'>|</span>"+tempValue.substring(gbPos,tempValue.length);
					//defaults.htmlDom.innerHTML = tempValue.substring(0,gbPos)+"|"+tempValue.substring(gbPos,tempValue.length);
				}
				isGB = false;
			}else{
				if(gbPos==tempValue.length+tempLetter.length){
					preTempValue = getXX(tempLetter.substring(0,tempLetter.length-1));
					lastTempValue = tempLetter.substring(tempLetter.length-1);
					defaults.htmlDom.innerHTML = tempValue+"<span style='color:"+tempcolor+";'>"+preTempValue+lastTempValue+"|</span>";	
					//defaults.htmlDom.innerHTML = tempValue+tempLetter+"|";	
				}else{
					preTempValue = getXX(tempLetter.substring(0,tempLetter.length-1));
					lastTempValue = tempLetter.substring(tempLetter.length-1);
					defaults.htmlDom.innerHTML = tempValue+"<span style='color:"+tempcolor+";'>"+preTempValue+lastTempValue+"|</span>"+tempValue.substring(gbPos,tempValue.length);
					//defaults.htmlDom.innerHTML = tempValue.substring(0,gbPos)+tempLetter+"|"+tempValue.substring(gbPos,tempValue.length)
				}
				isGB = false;
			}	
		}
	}
	clearTimeout(passwordTxt);
	passwordTxt = setTimeout(function(){
		_callback();
	},1000);
}

//汉字翻页
function wordPageOprea(_num){
	if(currWordPage+_num<1 || currWordPage+_num>wordArr.length) return;
	$("word"+wordPage%4+"_"+wordPos).style.backgroundColor = globalColorConf.tdBgColor4;
	$("word"+wordPage%4+"_"+wordPos).style.color = globalColorConf.wordColor;
	currWordPage += _num;
	
	wordPage = (currWordPage-1)*4;
	wordPos = 0;
	showWord();	
}

//input框定位
function inputPosition(){
	var len = getCharacterLength(inputValue+tempLetter);
	var temprow = 1;
	if(len<=71){
		temprow = 1;
	}else{
		temprow = Math.ceil((len-71)/79)+1;
	}
	
	if(temprow>1){
		$("keyinput").style.height = 35+temprow*40+"px";
		if(defaults.isEng>0){
			$("keyinput").style.top = 444-temprow*40+"px";	
		}else{
			$("keyinput").style.top = 501-temprow*40+"px";		
		}
	}else{
		$("keyinput").style.height = 17+temprow*40+"px";
		if(defaults.isEng>0){
			$("keyinput").style.top = 462-temprow*40+"px";	
		}else{
			$("keyinput").style.top = 519-temprow*40+"px";	
		}
	}
	
		
	
}

//键盘移动
function keyMove(_num){
	var classname = "";
	if(idArr[keyPos].type==0){ //数字
		classname = globalColorConf.tdBgColor2 ;
	}else if(idArr[keyPos].type==1 || idArr[keyPos].type==10){ //字母
		classname = globalColorConf.tdBgColor3;
	}else if(idArr[keyPos].type==2){ //特殊字符
		classname = globalColorConf.tdBgColor2 ;
	}else{
		classname = globalColorConf.tdBgColor1;
	}
	if(keyPos+_num<0){
		if(idArr[keyPos].ids.length==2){
			$(idArr[keyPos].ids[0]).style.backgroundColor = classname;
			$(idArr[keyPos].ids[1]).style.backgroundColor = classname;	
		}else if(idArr[keyPos].ids.length==4){
			$(idArr[keyPos].ids[0]).style.backgroundColor = classname;
			$(idArr[keyPos].ids[1]).style.backgroundColor = classname;
			$(idArr[keyPos].ids[2]).style.backgroundColor = classname;
			$(idArr[keyPos].ids[3]).style.backgroundColor = classname;
		}else{
			$(idArr[keyPos].ids[0]).style.backgroundColor = classname;
		}
		$(idArr[keyPos].ids[0]).style.color = defaults.color;
		if(keyPos==19){
			//移动到箭头
			$("r_arrow").style.backgroundColor = defaults.selectbgColor;
			$("r_arrow").style.color = globalColorConf.selectColor;
			focusArea = 3;
		}else{
			if(wordArr.length>0 && defaults.isEng==1){
				$("word"+wordPage%4+"_"+wordPos).style.backgroundColor = defaults.selectbgColor;
				$("word"+wordPage%4+"_"+wordPos).style.color = globalColorConf.selectColor;
				tempfocusArea = focusArea;
				focusArea = 1;
			}else{
				tempfocusArea = focusArea;
				showAndHideButton(true);			
			}
		}
		return;
	}else if(keyPos+_num>idArr.length-1){
		return;	
	}
	
	if(idArr[keyPos].ids.length==2){
		$(idArr[keyPos].ids[0]).style.backgroundColor = classname;
		$(idArr[keyPos].ids[1]).style.backgroundColor = classname;
	}else if(idArr[keyPos].ids.length==4){
		$(idArr[keyPos].ids[0]).style.backgroundColor = classname;
		$(idArr[keyPos].ids[1]).style.backgroundColor = classname;
		$(idArr[keyPos].ids[2]).style.backgroundColor = classname;
		$(idArr[keyPos].ids[3]).style.backgroundColor = classname;
	}else{
		$(idArr[keyPos].ids[0]).style.backgroundColor = classname;
	}
	// if(keyPos==39 || keyPos==59){//焦点在上下箭头上
	// 	$(idArr[keyPos].ids[0]).style.color = defaults.selectColor;	
	// }else{
		$(idArr[keyPos].ids[0]).style.color = defaults.color;
	// }
	
	if(keyPos==19 && isExpansion==1 && _num==-1 || keyPos==39 && isExpansion==1 && _num==-1 || keyPos==59 && isExpansion==1 && _num==-1){
		$("word"+wordPage%4+"_"+wordPos).style.backgroundColor = defaults.selectbgColor;
		$("word"+wordPage%4+"_"+wordPos).style.color = globalColorConf.selectColor;
		focusArea = 1;
		return;		
	}
	
	keyPos += _num;
	
	classname = "#ffca28";
	if(idArr[keyPos].ids.length==2){
		$(idArr[keyPos].ids[0]).style.backgroundColor = classname;
		$(idArr[keyPos].ids[1]).style.backgroundColor = classname;
	}else if(idArr[keyPos].ids.length==4){
		$(idArr[keyPos].ids[0]).style.backgroundColor = classname;
		$(idArr[keyPos].ids[1]).style.backgroundColor = classname;
		$(idArr[keyPos].ids[2]).style.backgroundColor = classname;
		$(idArr[keyPos].ids[3]).style.backgroundColor = classname;
	}else{
		$(idArr[keyPos].ids[0]).style.backgroundColor = classname;
	}
	
	$(idArr[keyPos].ids[0]).style.color = defaults.selectColor;
	
}

document.onkeydown = eventHandler;
function eventHandler(keycode){
	var e = e || event;
	var keycode = e.keyCode || e.which || e.charCode;
	var keyReturnFlag = navigator.appName.indexOf("iPanel") != -1?1:true;		//根据返回值来判断要不要留至下一级
	// var p2 = event.modifiers;	
	switch(keycode){
		case 1:
		case 38:
			if(focusArea==0){
				keyMove(-20);
			}else if(focusArea==1){
				wordMove(-2);
			}else if(focusArea==3){
				$("r_arrow").style.backgroundColor = globalColorConf.tdBgColor1;
				$("r_arrow").style.color = globalColorConf.arrowColor;
				tempfocusArea = focusArea;
				showAndHideButton(true);	
			}else if(focusArea == 5){
				GBMove(-40);	
			}
			keyReturnFlag = 0;
			break;
		case 2:
		case 40:
			if(focusArea==0){
				keyMove(20);
			}else if(focusArea==1){
				wordMove(2);
			}else if(focusArea==2){
				showAndHideButton(false);
			}else if(focusArea==3){
				$("r_arrow").style.backgroundColor = globalColorConf.tdBgColor1;
				$("r_arrow").style.color = globalColorConf.arrowColor;
				keyPos = 19;
				keyMove(0);
				focusArea = 0;
			}else if(focusArea == 5){
				GBMove(40);	
			}
			keyReturnFlag = 0;
			break;
		case 3:
		case 37:
			if(focusArea==0){
				keyMove(-1);
			}else if(focusArea==1){
				wordMove(-1);	
			}else if(focusArea==3){
				$("r_arrow").style.backgroundColor = globalColorConf.tdBgColor1;
				$("r_arrow").style.color = globalColorConf.arrowColor;
				$("word"+wordPage%4+"_"+wordPos).style.backgroundColor = defaults.selectbgColor;
				$("word"+wordPage%4+"_"+wordPos).style.color = globalColorConf.selectColor;
				focusArea = 1;	
			}else if(focusArea==2){
				$("inputButton").style.backgroundColor = globalColorConf.tdBgColor1;
				$("inputButton").style.color = globalColorConf.inputButtonColor;
				$("keyinput").style.backgroundColor = defaults.selectbgColor;
				$("inputValue").style.color = globalColorConf.selectColor;
				if(tempLetter!=""){
					if(isJhPos==0){
						inputValue += tempLetter;
						tempLetter = "";
						gbPos = inputValue.length;
						beforeArr = [];
					}else{
						inputValue = inputValue.substring(0,gbPos)+tempLetter+inputValue.substring(gbPos,inputValue.length);
						tempLetter = "";
						beforeArr = [];	
					}
				}
				isJhPos = 1;
				showGB();
				focusArea = 5;	
			}else if(focusArea == 5){
				GBMove(-1);	
			}
			keyReturnFlag = 0;
			break;
		case 4:
		case 39:
			if(focusArea==0){
				keyMove(1);
			}else if(focusArea==1){
				wordMove(1);	
			}else if(focusArea==5){
				GBMove(1);
			}
			keyReturnFlag = 0;
			break;
		case 13://enter
			doSelect();
			keyReturnFlag = 0;
			break;
		case 8:
		case 340: 	//back
			goBack();
			keyReturnFlag = 0;
			break;
		case 513:	//menu
			exitWidget();
			break;
		case 512: 	//homepage
			goBack();
			keyReturnFlag = 0;
			break;			
		default:
			break;
	}
	if(isAdvanceFlag){
		keyReturnFlag = keyReturnFlag?true:false;
	}else{
		if(navigatorFlag!="iPanel"){
			keyReturnFlag = keyReturnFlag?true:false;	
		}
	}
	return keyReturnFlag;
};

function getPinyinArr(_pinyin){
	var arr = [];
	var str = "";
	function matchPinyinStr(index){
		str += _pinyin.substring(index,index+1);
		var r = matchPinyin(str);	
		if(r==null){
			var temppinyin = str.substring(0,str.length-1);
			arr.push(temppinyin);
			str = str.replace(arr.join(""),"");
		}
		index++;
		if(index<=_pinyin.length-1){
			matchPinyinStr(index);
		}
	}
	matchPinyinStr(0);
	return arr;
}


//匹配拼音是否存在
function matchPinyin(_pinyin){
	var re = new RegExp(_pinyin,"i");
	var r = re.exec(pinyin);
   return r;
}


function showAndHideButton(_flag){
	if(_flag){
		$("inputButton").style.backgroundColor = defaults.selectbgColor;
		$("inputButton").style.color = globalColorConf.selectColor;	
		focusArea = 2;
	}else{
		$("inputButton").style.backgroundColor = globalColorConf.tdBgColor1;
		$("inputButton").style.color = globalColorConf.inputButtonColor;
		if(tempfocusArea==0){
			keyMove(0);	
		}else if(tempfocusArea==3){
			$("r_arrow").style.backgroundColor = defaults.selectbgColor;
			$("r_arrow").style.color = globalColorConf.selectColor;
		}else{
			if(wordArr.length>0){
				$("word"+wordPage%4+"_"+wordPos).style.backgroundColor = defaults.selectbgColor;
				$("word"+wordPage%4+"_"+wordPos).style.color = globalColorConf.selectColor;
			}else{
				keyMove(0);	
				tempfocusArea = 0;	
			}
		}
		focusArea = tempfocusArea;	
	}
}


function bottomChangeArea(){
	$("keyinput").style.backgroundColor = globalColorConf.tdBgColor3;
	$("inputValue").style.color = globalColorConf.inputValueColor;
	if(tempfocusArea==0){
		keyMove(0);	
	}else if(tempfocusArea==3){
		$("r_arrow").style.backgroundColor = defaults.selectbgColor;
		$("r_arrow").style.color = globalColorConf.selectColor;
	}else{
		$("word"+wordPage%4+"_"+wordPos).style.backgroundColor = defaults.selectbgColor;
		$("word"+wordPage%4+"_"+wordPos).style.color = globalColorConf.selectColor;	
	}
	focusArea = tempfocusArea;		
}

function showWord(){
	var tempCount = 0;
	var tempWidth = "";
	for(var i=0;i<4;i++){
		var tempPage = (currWordPage-1)*4+i;
		if(tempPage<wordArr.length){
			for(var j=0;j<19;j++){
				if(j<wordArr[(currWordPage-1)*4+i].length){
					tempWidth = wordArr[tempPage][j].cellNumber*tabW;
					if(j==0){
						tempCount = 0;
						var marginLeft = 30;
						if(navigatorFlag=="iPanel" && !isAdvanceFlag){
							marginLeft = 29;
						}
						$("word"+i+"_"+j).style.width = (tempWidth+29)+"px";
						$("word"+i+"_"+j).style.left = "0px";
						$("wordfirst"+i+"_"+j).style.left = marginLeft+"px"; 
						$("wordfirst"+i+"_"+j).style.width = (navigatorFlag=="iPanel" && !isAdvanceFlag)?tempWidth+"px":(tempWidth-1)+"px";
						$("wordfirst"+i+"_"+j).innerHTML = wordArr[tempPage][j].word;
						tempCount += tempWidth+marginLeft;
					}else{
						$("word"+i+"_"+j).style.left = (navigatorFlag=="iPanel" && !isAdvanceFlag)?tempCount+1+"px":tempCount+"px"; 
						$("word"+i+"_"+j).style.width = (navigatorFlag=="iPanel" && !isAdvanceFlag)?tempWidth-1+"px":(tempWidth-1)+"px";
						$("word"+i+"_"+j).innerHTML = wordArr[tempPage][j].word;
						tempCount += tempWidth;
					}
				
				}else{
					tempWidth = tabW;
					if(j==0){
						tempCount = 0;
						var marginLeft = 30;
						if(navigatorFlag=="iPanel" && !isAdvanceFlag){
							marginLeft = 29;
						}
						$("word"+i+"_"+j).style.width = (tempWidth+29)+"px";
						$("word"+i+"_"+j).style.left = "0px";
						$("wordfirst"+i+"_"+j).style.left = marginLeft+"px"; 
						$("wordfirst"+i+"_"+j).style.width = (navigatorFlag=="iPanel" && !isAdvanceFlag)?tempWidth+"px":(tempWidth-1)+"px";
						$("wordfirst"+i+"_"+j).innerHTML = "&nbsp;&nbsp;";	
						tempCount += tempWidth+marginLeft;					
					}else{
						$("word"+i+"_"+j).style.left = (navigatorFlag=="iPanel" && !isAdvanceFlag)?tempCount+1+"px":tempCount+"px"; 
						$("word"+i+"_"+j).style.width = (navigatorFlag=="iPanel" && !isAdvanceFlag)?tempWidth-1+"px":(tempWidth-1)+"px";
						$("word"+i+"_"+j).innerHTML = "&nbsp;&nbsp;";	
						tempCount += tempWidth;
					}
				}
			}	
		}else{
			for(var j=0;j<19;j++){
				tempWidth = tabW;
					if(j==0){
						tempCount = 0;
						var marginLeft = 30;
						if(navigatorFlag=="iPanel" && !isAdvanceFlag){
							marginLeft = 29;
						}
						$("word"+i+"_"+j).style.width = (tempWidth+29)+"px";
						$("word"+i+"_"+j).style.left = "0px";
						$("wordfirst"+i+"_"+j).style.left = marginLeft+"px"; 
						$("wordfirst"+i+"_"+j).style.width = (navigatorFlag=="iPanel" && !isAdvanceFlag)?tempWidth+"px":(tempWidth-1)+"px";
						$("wordfirst"+i+"_"+j).innerHTML = "&nbsp;&nbsp;";	
						tempCount += tempWidth+marginLeft;						
					}else{
						$("word"+i+"_"+j).style.left = (navigatorFlag=="iPanel" && !isAdvanceFlag)?tempCount+1+"px":tempCount+"px"; 
						$("word"+i+"_"+j).style.width = (navigatorFlag=="iPanel" && !isAdvanceFlag)?tempWidth-1+"px":(tempWidth-1)+"px";
						$("word"+i+"_"+j).innerHTML = "&nbsp;&nbsp;";	
						tempCount += tempWidth;
					}
			}
		}
	}
	if(focusArea==1){
		$("word"+wordPage%4+"_"+wordPos).style.backgroundColor = defaults.selectbgColor;
		$("word"+wordPage%4+"_"+wordPos).style.color = globalColorConf.selectColor;	
	}
}

function wordMove(_num){		
	if(Math.abs(_num)==1){
		if(wordPos+_num<0 && _num==-1) return;
		
		$("word"+wordPage%4+"_"+wordPos).style.backgroundColor = globalColorConf.tdBgColor4;
		$("word"+wordPage%4+"_"+wordPos).style.color = globalColorConf.wordColor;
		if(wordPos+_num>wordArr[wordPage].length-1 && _num==1){
			//移动到箭头
			$("r_arrow").style.backgroundColor = defaults.selectbgColor;
			$("r_arrow").style.color = globalColorConf.selectColor;
			focusArea = 3;
			return;	
		}
		wordPos += _num;
	}else{
		if(isExpansion==1){
			if(_num<0){
				$("word"+wordPage%4+"_"+wordPos).style.backgroundColor = globalColorConf.tdBgColor4;
				$("word"+wordPage%4+"_"+wordPos).style.color = globalColorConf.wordColor;
				if(wordPage==0){//切换到确定按钮
					tempfocusArea = focusArea;
					showAndHideButton(true);
					return;
				}else{
					wordPage--;		
				}
			}else{
				if(wordPage==wordArr.length-1){
					 return;	
				}else{
					$("word"+wordPage%4+"_"+wordPos).style.backgroundColor = globalColorConf.tdBgColor4;
					$("word"+wordPage%4+"_"+wordPos).style.color = globalColorConf.wordColor;
					wordPage++;	
					if(wordPos>wordArr[wordPage].length-1){
						wordPos = 	wordArr[wordPage].length-1;
					}
				}
			}
		}else{
			$("word"+wordPage%4+"_"+wordPos).style.backgroundColor = globalColorConf.tdBgColor4;
			$("word"+wordPage%4+"_"+wordPos).style.color = globalColorConf.wordColor;
			if(_num>0){ //切换到键盘
				keyMove(0);
				focusArea = 0;
				return;
			}else if(_num<0){ //切换到确定按钮
				tempfocusArea = focusArea;
				showAndHideButton(true);
				return;
			}
			
		}
	}
	
	var tempPage = Math.ceil((wordPage+1)/4);
	if(tempPage!=currWordPage){
		$("word"+wordPage%4+"_"+wordPos).style.backgroundColor = globalColorConf.tdBgColor4;
		$("word"+wordPage%4+"_"+wordPos).style.color = globalColorConf.wordColor;
		currWordPage = tempPage;
		wordPos = 0;
		showWord();	
		return;
	}
	
	$("word"+wordPage%4+"_"+wordPos).style.backgroundColor = defaults.selectbgColor;
	$("word"+wordPage%4+"_"+wordPos).style.color = globalColorConf.selectColor;
	
}


//根据汉字找相对应的词组
function getRelatedWords(str){
	return [];
	if(str=="") return;
	return iPanel.misc.getRelatedWords(str);
}

//根据拼音找汉字
function getInputWords(str){
	if(str=="") return;
	return iPanel.misc.getInputWords(str);
}

//词联想
function getWordData(_data){
	var url = reqIp+"?wd="+encodeURI(_data)+"&pn=0&num=200";
	var xmlhttp;
	if (window.XMLHttpRequest){// code for IE7+, Firefox, Chrome, Opera, Safari
		xmlhttp=new XMLHttpRequest();
	}else{// code for IE6, IE5
	  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
	}
	xmlhttp.onreadystatechange=function(){
	  if (xmlhttp.readyState==4 && xmlhttp.status==200){
			var data = eval("("+xmlhttp.responseText+")");
			if(typeof data.ret!="undefined") return;
			arr = data[0];
			var tempArr = [];
			for(var i=0; i<arr.length-1; i++){
				navigator.userAgent.toLowerCase().indexOf("ipanel") !=-1 ? tempArr.push(iPanel.getDisplayString(arr[i][0])) : tempArr.push(arr[i][0]);
			}
			if(arr.length > 0 && arr[arr.length-1][0] != "end"){
				navigator.userAgent.toLowerCase().indexOf("ipanel") !=-1 ? tempArr.push(iPanel.getDisplayString(arr[arr.length-1][0])) : tempArr.push(arr[arr.length-1][0]);
			} 
			var tempIndex = 0;
			if(tempArr.length>0){
				wordArr = [];
			}
			var cellNumber = 0;
			var rowPos = 0;
			var tempRowArr = [];
			for(var i=0;i<tempArr.length;i++){
				var temp = cellNumber;
				var tempCharacterLen = getCrossCellNumber(getCharacterLength(tempArr[i]));
				if(tempCharacterLen>0){
					cellNumber+=tempCharacterLen;	
					if(cellNumber>19){
						//将上一行最后一个格子跨满一行
						tempRowArr[tempRowArr.length-1].cellNumber = tempRowArr[tempRowArr.length-1].cellNumber+(19 - temp);
						cellNumber = tempCharacterLen;	
						wordArr.push(tempRowArr);
						tempRowArr = [];
						tempRowArr.push({"word":tempArr[i],cellNumber:tempCharacterLen});
						if(i==tempArr.length-1){
							wordArr.push(tempRowArr);
						}
					}else{
						tempRowArr.push({"word":tempArr[i],cellNumber:tempCharacterLen});
						tempIndex++;
						if(i==tempArr.length-1){
							wordArr.push(tempRowArr);
						}
					}
				}	
			}
			
			$("word"+wordPage%4+"_"+wordPos).style.backgroundColor = globalColorConf.tdBgColor4;
			$("word"+wordPage%4+"_"+wordPos).style.color = globalColorConf.wordColor;
			if(isExpansion==1){
				$("keyword").style.height = "55px";
				$("t6").innerHTML = tempT6Value;
				currWordPage = 1;
				isExpansion = 0;
			}
			wordPage = 0;
			wordPos = 0;
			showWord();
	   }
	}
	xmlhttp.open("GET",url,true);
	xmlhttp.send();
}

//字母获取汉字
function getAjaxData(_data){
	_data = _data.toLowerCase();
	var url = reqIp+"?pinyin="+_data+"&dict="+defaults.dict+"&pn=0&num=200";
	var xmlhttp;
	if (window.XMLHttpRequest){// code for IE7+, Firefox, Chrome, Opera, Safari
		xmlhttp=new XMLHttpRequest();
	}else{// code for IE6, IE5
	  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
	}
	xmlhttp.onreadystatechange=function(){
	  if (xmlhttp.readyState==4 && xmlhttp.status==200){
			var arr = eval('('+xmlhttp.responseText+')');
			arr = arr[0];
			var tempArr = [];
			for(var i=0; i<arr.length-1; i++){
				navigatorFlag=="iPanel" ? tempArr.push(iPanel.getDisplayString(arr[i][0])) : tempArr.push(arr[i][0]);
			}
			
			if(arr.length > 0 && arr[arr.length-1][0] != "end"){
				navigatorFlag=="iPanel"? tempArr.push(iPanel.getDisplayString(arr[arr.length-1][0])) : tempArr.push(arr[arr.length-1][0]);
			}
			var tempIndex = 0;
			if(tempArr.length>0){
				wordArr = [];
			}
			var cellNumber = 0;
			var rowPos = 0;
			var tempRowArr = [];
			for(var i=0;i<tempArr.length;i++){
				var temp = cellNumber;
				var tempCharacterLen = getCrossCellNumber(getCharacterLength(tempArr[i]));
				if(tempCharacterLen>0){
					cellNumber+=tempCharacterLen;	
					if(cellNumber>19){
						//将上一行最后一个格子跨满一行
						tempRowArr[tempRowArr.length-1].cellNumber = tempRowArr[tempRowArr.length-1].cellNumber+(19 - temp);
						cellNumber = tempCharacterLen;	
						wordArr.push(tempRowArr);
						tempRowArr = [];
						tempRowArr.push({"word":tempArr[i],cellNumber:tempCharacterLen});
						if(i==tempArr.length-1){
							wordArr.push(tempRowArr);
						}
					}else{
						tempRowArr.push({"word":tempArr[i],cellNumber:tempCharacterLen});
						tempIndex++;
						if(i==tempArr.length-1){
							wordArr.push(tempRowArr);
						}
					}
				}	
			}
			wordPage = 0;
			wordPos = 0;
			showWord();
	   }
	}
	xmlhttp.open("GET",url,true);
	xmlhttp.send();			
}

//基于字节获取跨格子的个数
function getCrossCellNumber(_character){
	var len = 0;
	if(_character>0 && _character<=2){
		len = 1;
	}else if(_character>2 && _character<=6){
		len = 2;
	}else if(_character>6 && _character<=12){
		len = 3;
	}else if(_character>12 && _character<=16){
		len = 4;
	}else if(_character>16 && _character<=22){
		len = 5;
	}else if(_character>22 && _character<=26){
		len = 6;
	}else if(_character>26 && _character<=30){
		len = 7;
	}else if(_character>31 && _character<=34){
		len = 8;
	}else if(_character>34 && _character<=40){
		len = 9;
	}else if(_character>40 && _character<=44){
		len = 10;
	}else if(_character>44 && _character<=48){
		len = 11;
	}else if(_character>48 && _character<=54){
		len = 12;
	}else if(_character>54 && _character<=58){
		len = 13;
	}else if(_character>58 && _character<=62){
		len = 14;
	}else if(_character>62 && _character<=68){
		len = 15;
	}else if(_character>68 && _character<=72){
		len = 16;
	}else if(_character>72 && _character<=78){
		len = 17;
	}else if(_character>78 && _character<=82){
		len = 18;
	}else if(_character>82){
		len = 19;
	}
	return len;
}	

//初始化元素位置
function initElementPosition(){
	if(navigatorFlag=="iPanel" && !isAdvanceFlag){		
		$("wordRow0").style.top = "0px";
		$("wordRow1").style.top = "55px";
		$("wordRow2").style.top = "110px";
		$("wordRow3").style.top = "166px";
		$("wordRow0").style.height = "55px";
		$("wordRow1").style.height = "54px";
		$("wordRow2").style.height = "55px";
		$("wordRow3").style.height = "74px";
		$("keyword").style.lineHeight = "51px";
		$("inputButton").style.lineHeight = "51px";
		for(var i=0;i<idArr.length;i++){
			$(idArr[i].ids[0]).style.width = "61px";	
		}
		var tempCount = 0;
		var tempWidth = 0;
		for(var i=0;i<4;i++){
			for(var j=0;j<19;j++){
				tempWidth = (i+1)*tabW;
				if(j==0){
					tempCount = 0;
					$("word"+i+"_"+j).style.left = "0px";
					$("word"+i+"_"+j).style.width = tempWidth+29+"px";
					$("wordfirst"+i+"_"+j).style.width = tabW+"px";
					$("wordfirst"+i+"_"+j).style.left = "29px";
					tempCount += tempWidth+29;
					$("wordfirst"+i+"_"+j).innerHTML = "";
				}else{
					$("word"+i+"_"+j).style.left = tempCount+"px";
					$("word"+i+"_"+j).style.width = tabW+"px";
					$("word"+i+"_"+j).innerHTML = "";
					tempCount += tempWidth;
				}
			}	
		}
	}else{
		$("wordRow0").style.top = "0px";
		$("wordRow1").style.top = "55px";
		$("wordRow2").style.top = "111px";
		$("wordRow3").style.top = "167px";
		$("wordRow0").style.height = "55px";
		$("wordRow1").style.height = "55px";
		$("wordRow2").style.height = "55px";
		$("wordRow3").style.height = "74px";
		$("keyword").style.lineHeight = "55px";
		$("inputButton").style.lineHeight = "55px";
		for(var i=0;i<idArr.length;i++){
			$(idArr[i].ids[0]).style.width = "60px";	
		}
		var tempCount = 0;
		var tempWidth = 0;
		for(var i=0;i<4;i++){
			for(var j=0;j<19;j++){
				tempWidth = (i+1)*tabW;
				if(j==0){
					tempCount = 0;
					$("word"+i+"_"+j).style.left = "0px";
					$("word"+i+"_"+j).style.width = tempWidth+29+"px";
					$("wordfirst"+i+"_"+j).style.width = (tabW-1)+"px";
					$("wordfirst"+i+"_"+j).style.left = "30px";
					$("wordfirst"+i+"_"+j).innerHTML = "";
					tempCount += tempWidth+30;
				}else{
					$("word"+i+"_"+j).style.left = tempCount+"px";
					$("word"+i+"_"+j).style.width = (tabW-1)+"px";
					$("word"+i+"_"+j).innerHTML = "";
					tempCount += tempWidth;
				}
			}	
		}
	}
}

function getXX(str){
	var tempStr = "";
	for(var i=0;i<str.length;i++){
		tempStr += "*";
	}
	return tempStr;				
}
		
function getCharacterLength(_str){	
	var _str = _str.replace(/[\(\)\-\\\[\]]/g, "0");
	var re = "";
	if(navigatorFlag=="iPanel" && !isAdvanceFlag){
		re = /[^\u2E80-\uFE4F]+/gi;		//iPanel匹配中文不一样，要加个非判断
	}else{//chrome,advance
		re = /[\u2E80-\uFE4F]+/gi;
	}
	var bb = _str.match(re);
	if(typeof bb == "undefined" || bb == "null"){
		return _str.length; 
	}
	var cc = "";
	if(bb!=null){
		cc = bb.join("");  
	}
	var totalLen = _str.length;
	var chLen = cc.length;
	var engLen = totalLen - chLen;
	var tW = chLen*2+engLen;
	return tW;
}

function extend(destination,source){
	for(var property in source){
		destination[property] = source[property];
	}
	return destination;
}

function $(id){
	return document.getElementById(id);	
}

function iDebug(str){
	if(navigator.appName.indexOf("iPanel") != -1){
		iPanel.debug(str, 2);	
	}else if(navigator.appName.indexOf("Opera") != -1){
		opera.postError(str);
	}else if(navigator.appName.indexOf("Netscape") != -1 || navigator.appName.indexOf("Google") != -1){
		console.log(str);
	}
}


window.onload = init;

</script>

</head>

<style type="text/css">
</style>
<body background="bg.jpg" leftmargin="0" topmargin="0">
<div id="keyinputFrame" style="position:absolute; top:0px; left:0px; width:1280px; height:720px;background: rgba(0,0,0,0.4);">
<div id="keyinput" style="position:absolute; top:422px; left:0px; width:1280px; height:57px;">
    <div id="inputValue" style="position:absolute; top:6px; left:48px; width:1200px; height:auto; line-height:40px;"></div>
    <div id="inputButton" style="position:absolute; bottom:0px; right:0px; width:152px; height:55px; line-height:55px; text-indent:28px;">确&nbsp;定</div>
</div>

<div id="keybord" style="position:absolute; left:0px;  top:534px; width:1280px; height:186px;">
<table id="keytable" width="100%" border="0" cellspacing="0" cellpadding="0">
  <tr >
  	<td style="width:30px;" class="bottomborder topborder numbg" id="num1_1">&nbsp;</td>
    <td class="rightborder bottomborder topborder borderwidth numbg" valign="middle" align="center" id="num1">1</td>
    <td class="rightborder bottomborder topborder numbg" valign="middle" align="center" id="num2">2</td>
    <td class="rightborder bottomborder topborder numbg" valign="middle" align="center" id="num3">3</td>
    <td class="rightborder bottomborder topborder letterbg" valign="middle" align="center" id="e0">Q</td>
    <td class="rightborder bottomborder topborder letterbg" valign="middle" align="center" id="e1">W</td>
    <td class="rightborder bottomborder topborder letterbg" valign="middle" align="center" id="e2">E</td>
    <td class="rightborder bottomborder topborder letterbg" valign="middle" align="center" id="e3">R</td>
    <td class="rightborder bottomborder topborder letterbg" valign="middle" align="center" id="e4">T</td>
    <td class="rightborder bottomborder topborder letterbg" valign="middle" align="center" id="e5">Y</td>
    <td class="rightborder bottomborder topborder letterbg" valign="middle" align="center" id="e6">U</td>
    <td class="rightborder bottomborder topborder letterbg" valign="middle" align="center" id="e7">I</td>
    <td class="rightborder bottomborder topborder letterbg" valign="middle" align="center" id="e8">O</td>
    <td class="rightborder bottomborder topborder letterbg" valign="middle" align="center" id="e9">P</td>
    <td class="rightborder bottomborder topborder specialbg" valign="middle" align="center" id="t0">...</td>
    <td class="rightborder bottomborder topborder specialbg" valign="middle" align="center" id="t1">@</td>
    <td class="rightborder bottomborder topborder specialbg" valign="middle" align="center" id="t2">&lt;</td>
    <td class="rightborder bottomborder topborder specialbg" valign="middle" align="center" id="t3">&gt;</td>
    <td class="rightborder bottomborder topborder specialbg" valign="middle" align="center" id="t4">(</td>
    <td class="rightborder bottomborder topborder specialbg" valign="middle" align="center" id="t5">)</td>
    <td class="bottomborder topborder specialbg" valign="middle" align="center" id="t6">%</td>
    <td style="width:30px;" class="bottomborder topborder borderheight specialbg" id="t6_6">&nbsp;</td>
  </tr>
  <tr>
  	<td style="width:30px;" class="bottomborder numbg" id="num4_4">&nbsp;</td>
    <td class="rightborder bottomborder borderwidth numbg" valign="middle" align="center" id="num4">4</td>
    <td class="rightborder bottomborder numbg" valign="middle" align="center" id="num5">5</td>
    <td class="rightborder bottomborder numbg" valign="middle" align="center" id="num6">6</td>
    <td class="rightborder bottomborder opreabg" style="font-size:20px;" valign="middle" align="center" id="e10">a/A</td>
    <td class="rightborder bottomborder letterbg" valign="middle" align="center" id="e11">A</td>
    <td class="rightborder bottomborder letterbg" valign="middle" align="center" id="e12">S</td>
    <td class="rightborder bottomborder letterbg" valign="middle" align="center" id="e13">D</td>
    <td class="rightborder bottomborder letterbg" valign="middle" align="center" id="e14">F</td>
    <td class="rightborder bottomborder letterbg" valign="middle" align="center" id="e15">G</td>
    <td class="rightborder bottomborder letterbg" valign="middle" align="center" id="e16">H</td>
    <td class="rightborder bottomborder letterbg" valign="middle" align="center" id="e17">J</td>
    <td class="rightborder bottomborder letterbg" valign="middle" align="center" id="e18">K</td>
    <td class="rightborder bottomborder letterbg" valign="middle" align="center" id="e19">L</td>
    <td class="rightborder bottomborder specialbg" valign="middle" align="center" id="t7">$</td>
    <td class="rightborder bottomborder specialbg" valign="middle" align="center" id="t8">*</td>
    <td class="rightborder bottomborder specialbg" valign="middle" align="center" id="t9">&amp;</td>
    <td class="rightborder bottomborder specialbg" valign="middle" align="center" id="t10">:</td>
    <td class="rightborder bottomborder specialbg" valign="middle" align="center" id="t11">#</td>
    <td class="rightborder bottomborder specialbg" valign="middle" align="center" id="t12">,</td>
    <td class="bottomborder specialbg" valign="middle" align="center" id="t13">▲</td>
    <td style="width:30px;" class="bottomborder borderheight specialbg" id="t13_13">&nbsp;</td>
  </tr>
  <tr>
  	<td style="width:30px;" class="numbg" id="num7_7">&nbsp;</td>
    <td class="rightborder borderwidth numbg" valign="middle" align="center" id="num7">7</td>
    <td class="rightborder numbg" valign="middle" align="center" id="num8">8</td>
    <td class="rightborder numbg" valign="middle" align="center" id="num9">9</td>
    <td class="rightborder numbg" valign="middle" align="center" id="num0">0</td>
    <td class="rightborder opreabg" valign="middle" align="center" style="font-size:22px;" id="e20">中/英</td>
    <td class="rightborder" valign="middle" align="center" id="e21">Z</td>
    <td class="rightborder letterbg" valign="middle" align="center" id="e22">X</td>
    <td class="rightborder letterbg" valign="middle" align="center" id="e23">C</td>
    <td class="rightborder letterbg" valign="middle" align="center" id="e24">V</td>
    <td class="rightborder letterbg" valign="middle" align="center" id="e25">B</td>
    <td class="rightborder letterbg" valign="middle" align="center" id="e26">N</td>
    <td class="rightborder letterbg" valign="middle" align="center" id="e27">M</td>
    <td class="rightborder opreabg" valign="middle" align="center" id="t14">空格</td>
    <td class="rightborder specialbg" valign="middle" align="center" id="t15">!</td>
    <td class="rightborder specialbg" valign="middle" align="center" id="t16">-</td>
    <td class="rightborder specialbg" valign="middle" align="center" style="font-size:22px;" id="t17">.com</td>
    <td class="rightborder specialbg" valign="middle" align="center" id="t18">.cn</td>
    <td class="rightborder specialbg" valign="middle" align="center" id="t19">&ldquo;</td>
    <td class="rightborder specialbg" valign="middle" align="center" id="t20">&rdquo;</td>
    <td valign="middle" align="center" class="opreabg" id="t21">▼</td>
    <td style="width:30px;" class="opreabg" id="t21_21">&nbsp;</td>
  </tr>
  <tr>
  	<td style="width:30px; height:19px; font-size:10px;" class="numbg" id="num7_7_7_7">&nbsp;</td>
    <td style="width:30px; height:19px; font-size:10px;" class="rightborder numbg" id="num7_7_7">&nbsp;</td>
    <td style="width:30px; height:19px; font-size:10px;" class="rightborder numbg" id="num8_8">&nbsp;</td>
    <td style="width:30px; height:19px; font-size:10px;" class="rightborder numbg" id="num9_9">&nbsp;</td>
    <td style="width:30px; height:19px; font-size:10px;" class="rightborder numbg" id="num0_0">&nbsp;</td>
    <td style="width:30px; height:19px; font-size:10px;" class="rightborder opreabg" id="e20_20">&nbsp;</td>
    <td style="width:30px; height:19px; font-size:10px;" class="rightborder letterbg" id="e21_21">&nbsp;</td>
    <td style="width:30px; height:19px; font-size:10px;" class="rightborder letterbg" id="e22_22">&nbsp;</td>
    <td style="width:30px; height:19px; font-size:10px;" class="rightborder letterbg" id="e23_23">&nbsp;</td>
    <td style="width:30px; height:19px; font-size:10px;" class="rightborder letterbg" id="e24_24">&nbsp;</td>
    <td style="width:30px; height:19px; font-size:10px;" class="rightborder letterbg" id="e25_25">&nbsp;</td>
    <td style="width:30px; height:19px; font-size:10px;" class="rightborder letterbg" id="e26_26">&nbsp;</td>
    <td style="width:30px; height:19px; font-size:10px;" class="rightborder letterbg" id="e27_27">&nbsp;</td>
    <td style="width:30px; height:19px; font-size:10px;" class="rightborder opreabg" id="t14_14">&nbsp;</td>
    <td style="width:30px; height:19px; font-size:10px;" class="rightborder specialbg" id="t15_15">&nbsp;</td>
    <td style="width:30px; height:19px; font-size:10px;" class="rightborder specialbg" id="t16_16">&nbsp;</td>
    <td style="width:30px; height:19px; font-size:10px;" class="rightborder specialbg" id="t17_17">&nbsp;</td>
    <td style="width:30px; height:19px; font-size:10px;" class="rightborder specialbg" id="t18_18">&nbsp;</td>
    <td style="width:30px; height:19px; font-size:10px;" class="rightborder specialbg" id="t19_19">&nbsp;</td>
    <td style="width:30px; height:19px; font-size:10px;" class="rightborder specialbg" id="t20_20">&nbsp;</td>
    <td style="width:30px; height:19px; font-size:10px;" class="opreabg" id="t21_21_21">&nbsp;</td>
    <td style="width:30px; height:19px; font-size:10px;" class="opreabg" id="t21_21_21_21">&nbsp;</td>
  </tr>
</table>
</div>

<div id="keyword" style="position: absolute; width: 1188px; top: 479px; height: 55px; line-height: 55px; visibility: visible; overflow: hidden;">
	<div id="wordRow0" style="position: absolute; top: 0px; left: 0px; width: 100%; height: 55px;" class="wordbottomborder">
   	  <div id="word0_0" style="position:absolute; left:0px; top:0px; height:100%; width:89px; z-index:19;" class="wordrightborder">
      	<div id="wordfirst0_0" style="position:absolute; top:0px; left:28px; width:60px; height:100%; text-align:center;"></div>
      </div>
        <div id="word0_1" style="position:absolute; left:89px; top:0px;height:100%; width:60px; text-align:center; z-index:18;" class="wordrightborder"></div>
        <div id="word0_2" style="position:absolute; left:150px; top:0px; height:100%; width:60px; text-align:center; z-index:17;" class="wordrightborder"></div>
        <div id="word0_3" style="position:absolute; left:211px; top:0px; height:100%; width:60px; text-align:center; z-index:16;" class="wordrightborder"></div>
        <div id="word0_4" style="position:absolute; left:272px; top:0px; height:100%; width:60px; text-align:center; z-index:15;" class="wordrightborder"></div>
        <div id="word0_5" style="position:absolute; left:333px; top:0px; height:100%; width:60px; text-align:center; z-index:14;" class="wordrightborder"></div>
        <div id="word0_6" style="position:absolute; left:394px; top:0px; height:100%; width:60px; text-align:center; z-index:13;" class="wordrightborder"></div>
        <div id="word0_7" style="position:absolute; left:455px; top:0px; height:100%; width:60px; text-align:center; z-index:12;" class="wordrightborder"></div>
        <div id="word0_8" style="position:absolute; left:516px; top:0px; height:100%; width:60px; text-align:center; z-index:11;" class="wordrightborder"></div>
        <div id="word0_9" style="position:absolute; left:577px; top:0px; height:100%; width:60px; text-align:center; z-index:10;" class="wordrightborder"></div>
        <div id="word0_10" style="position:absolute; left:638px; top:0px; height:100%; width:60px; text-align:center; z-index:9;" class="wordrightborder"></div>
        <div id="word0_11" style="position:absolute; left:699px; top:0px; height:100%; width:60px; text-align:center; z-index:8;" class="wordrightborder"></div>
        <div id="word0_12" style="position:absolute; left:760px; top:0px; height:100%; width:60px; text-align:center; z-index:7;" class="wordrightborder"></div>
        <div id="word0_13" style="position:absolute; left:821px; top:0px; height:100%; width:60px; text-align:center; z-index:6;" class="wordrightborder"></div>
        <div id="word0_14" style="position:absolute; left:882px; top:0px; height:100%; width:60px; text-align:center; z-index:5;" class="wordrightborder"></div>
        <div id="word0_15" style="position:absolute; left:943px; top:0px; height:100%; width:60px; text-align:center; z-index:4;" class="wordrightborder"></div>
        <div id="word0_16" style="position:absolute; left:1004px; top:0px; height:100%; width:60px; text-align:center; z-index:3;" class="wordrightborder"></div>
        <div id="word0_17" style="position:absolute; left:1065px; top:0px; height:100%; width:60px; text-align:center; z-index:2;" class="wordrightborder"></div>
        <div id="word0_18" style="position:absolute; left:1126px; top:0px; height:100%; width:60px; text-align:center; z-index:1;font-size: 30px;"></div>
    </div>
     
     <div id="wordRow1" style="position:absolute; top:56px; left:0px; width:100%; height:55px;" class="wordbottomborder wordtopborder">
     	<div id="word1_0" style="position:absolute; left:0px; top:0px; height:100%; width:89px; z-index:19;" class="wordrightborder"><div id="wordfirst1_0" style="position:absolute; top:0px; left:28px; width:60px; height:100%; text-align:center;"></div></div>
        <div id="word1_1" style="position:absolute; left:89px; top:0px; height:100%; width:60px; text-align:center; z-index:18;" class="wordrightborder"></div>
        <div id="word1_2" style="position:absolute; left:150px; top:0px; height:100%; width:60px; text-align:center; z-index:17;" class="wordrightborder"></div>
        <div id="word1_3" style="position:absolute; left:211px; top:0px; height:100%; width:60px; text-align:center; z-index:16;" class="wordrightborder"></div>
        <div id="word1_4" style="position:absolute; left:272px; top:0px; height:100%; width:60px; text-align:center; z-index:15;" class="wordrightborder"></div>
        <div id="word1_5" style="position:absolute; left:333px; top:0px; height:100%; width:60px; text-align:center; z-index:14;" class="wordrightborder"></div>
        <div id="word1_6" style="position:absolute; left:394px; top:0px; height:100%; width:60px; text-align:center; z-index:13;" class="wordrightborder"></div>
        <div id="word1_7" style="position:absolute; left:455px; top:0px; height:100%; width:60px; text-align:center; z-index:12;" class="wordrightborder"></div>
        <div id="word1_8" style="position:absolute; left:516px; top:0px; height:100%; width:60px; text-align:center; z-index:11;" class="wordrightborder"></div>
        <div id="word1_9" style="position:absolute; left:577px; top:0px; height:100%; width:60px; text-align:center; z-index:10;" class="wordrightborder"></div>
        <div id="word1_10" style="position:absolute; left:638px; top:0px; height:100%; width:60px; text-align:center; z-index:9;" class="wordrightborder"></div>
        <div id="word1_11" style="position:absolute; left:699px; top:0px; height:100%; width:60px; text-align:center; z-index:8;" class="wordrightborder"></div>
        <div id="word1_12" style="position:absolute; left:760px; top:0px; height:100%; width:60px; text-align:center; z-index:7;" class="wordrightborder"></div>
        <div id="word1_13" style="position:absolute; left:821px; top:0px; height:100%; width:60px; text-align:center; z-index:6;" class="wordrightborder"></div>
        <div id="word1_14" style="position:absolute; left:882px; top:0px; height:100%; width:60px; text-align:center; z-index:5;" class="wordrightborder"></div>
        <div id="word1_15" style="position:absolute; left:943px; top:0px; height:100%; width:60px; text-align:center; z-index:4;" class="wordrightborder"></div>
        <div id="word1_16" style="position:absolute; left:1004px; top:0px; height:100%; width:60px; text-align:center; z-index:3;" class="wordrightborder"></div>
        <div id="word1_17" style="position:absolute; left:1065px; top:0px; height:100%; width:60px; text-align:center; z-index:2;" class="wordrightborder"></div>
        <div id="word1_18" style="position:absolute; left:1126px; top:0px; height:100%; width:60px; text-align:center; z-index:1;" class="wordrightborder"></div>
     </div>
    <div id="wordRow2" style="position:absolute; top:112px; left:0px; width:100%; height:55px;" class="wordbottomborder wordtopborder">
    	<div id="word2_0" style="position:absolute; left:0px; top:0px; height:100%; width:89px; z-index:19;" class="wordrightborder"><div id="wordfirst2_0" style="position:absolute; top:0px; left:28px; width:60px; height:100%; text-align:center;"></div></div>
        <div id="word2_1" style="position:absolute; left:89px; top:0px; height:100%; width:60px; text-align:center; z-index:18;" class="wordrightborder"></div>
        <div id="word2_2" style="position:absolute; left:150px; top:0px; height:100%; width:60px; text-align:center; z-index:17;" class="wordrightborder"></div>
        <div id="word2_3" style="position:absolute; left:211px; top:0px; height:100%; width:60px; text-align:center; z-index:16;" class="wordrightborder"></div>
        <div id="word2_4" style="position:absolute; left:272px; top:0px; height:100%; width:60px; text-align:center; z-index:15;" class="wordrightborder"></div>
        <div id="word2_5" style="position:absolute; left:333px; top:0px; height:100%; width:60px; text-align:center; z-index:14;" class="wordrightborder"></div>
        <div id="word2_6" style="position:absolute; left:394px; top:0px; height:100%; width:60px; text-align:center; z-index:13;" class="wordrightborder"></div>
        <div id="word2_7" style="position:absolute; left:455px; top:0px; height:100%; width:60px; text-align:center; z-index:12;"  class="wordrightborder"></div>
        <div id="word2_8" style="position:absolute; left:516px; top:0px; height:100%; width:60px; text-align:center; z-index:11;" class="wordrightborder"></div>
        <div id="word2_9" style="position:absolute; left:577px; top:0px; height:100%; width:60px; text-align:center; z-index:10;" class="wordrightborder"></div>
        <div id="word2_10" style="position:absolute; left:638px; top:0px; height:100%; width:60px; text-align:center; z-index:9;" class="wordrightborder"></div>
        <div id="word2_11" style="position:absolute; left:699px; top:0px; height:100%; width:60px; text-align:center; z-index:8;" class="wordrightborder"></div>
        <div id="word2_12" style="position:absolute; left:760px; top:0px; height:100%; width:60px; text-align:center; z-index:7;" class="wordrightborder"></div>
        <div id="word2_13" style="position:absolute; left:821px; top:0px; height:100%; width:60px; text-align:center; z-index:6;" class="wordrightborder"></div>
        <div id="word2_14" style="position:absolute; left:882px; top:0px; height:100%; width:60px; text-align:center; z-index:5;" class="wordrightborder"></div>
        <div id="word2_15" style="position:absolute; left:943px; top:0px; height:100%; width:60px; text-align:center; z-index:4;" class="wordrightborder"></div>
        <div id="word2_16" style="position:absolute; left:1004px; top:0px; height:100%; width:60px; text-align:center; z-index:3;" class="wordrightborder"></div>
        <div id="word2_17" style="position:absolute; left:1065px; top:0px; height:100%; width:60px; text-align:center; z-index:2;" class="wordrightborder"></div>
        <div id="word2_18" style="position:absolute; left:1126px; top:0px; height:100%; width:60px; text-align:center; z-index:1;" class="wordrightborder"></div>
    </div>
    <div id="wordRow3" style="position:absolute; top:168px; left:0px; width:100%; height:76px;" class="wordtopborder">
    	<div id="word3_0" style="position:absolute; left:0px; top:0px; height:100%; width:89px; z-index:19;" class="wordrightborder"><div id="wordfirst3_0" style="position:absolute; top:0px; left:28px; width:60px; height:100%; text-align:center;"></div></div>
        <div id="word3_1" style="position:absolute; left:89px; top:0px; height:100%; width:60px; text-align:center; z-index:18;" class="wordrightborder"></div>
        <div id="word3_2" style="position:absolute; left:150px; top:0px; height:100%; width:60px; text-align:center; z-index:17;" class="wordrightborder"></div>
        <div id="word3_3" style="position:absolute; left:211px; top:0px; height:100%; width:60px; text-align:center; z-index:16;" class="wordrightborder"></div>
        <div id="word3_4" style="position:absolute; left:272px; top:0px; height:100%; width:60px; text-align:center; z-index:15;" class="wordrightborder"></div>
        <div id="word3_5" style="position:absolute; left:333px; top:0px; height:100%; width:60px; text-align:center; z-index:14;" class="wordrightborder"></div>
        <div id="word3_6" style="position:absolute; left:394px; top:0px; height:100%; width:60px; text-align:center; z-index:13;" class="wordrightborder"></div>
        <div id="word3_7" style="position:absolute; left:455px; top:0px; height:100%; width:60px; text-align:center; z-index:12;" class="wordrightborder"></div>
        <div id="word3_8" style="position:absolute; left:516px; top:0px; height:100%; width:60px; text-align:center; z-index:11;" class="wordrightborder"></div>
        <div id="word3_9" style="position:absolute; left:577px; top:0px; height:100%; width:60px; text-align:center; z-index:10" class="wordrightborder"></div>
        <div id="word3_10" style="position:absolute; left:638px; top:0px; height:100%; width:60px; text-align:center; z-index:9;" class="wordrightborder"></div>
        <div id="word3_11" style="position:absolute; left:699px; top:0px; height:100%; width:60px; text-align:center; z-index:8;" class="wordrightborder"></div>
        <div id="word3_12" style="position:absolute; left:760px; top:0px; height:100%; width:60px; text-align:center; z-index:7;" class="wordrightborder"></div>
        <div id="word3_13" style="position:absolute; left:821px; top:0px; height:100%; width:60px; text-align:center; z-index:6" class="wordrightborder"></div>
        <div id="word3_14" style="position:absolute; left:882px; top:0px; height:100%; width:60px; text-align:center; z-index:5" class="wordrightborder"></div>
        <div id="word3_15" style="position:absolute; left:943px; top:0px; height:100%; width:60px; text-align:center; z-index:4" class="wordrightborder"></div>
        <div id="word3_16" style="position:absolute; left:1004px; top:0px; height:100%; width:60px; text-align:center; z-index:3" class="wordrightborder"></div>
        <div id="word3_17" style="position:absolute; left:1065px; top:0px; height:100%; width:60px; text-align:center; z-index:2" class="wordrightborder"></div>
        <div id="word3_18" style="position:absolute; left:1126px; top:0px; height:100%; width:60px; text-align:center; z-index:1;" class="wordrightborder"></div>
    </div>
    
 </div>

<div id="r_arrow" style="position: absolute; width: 91px; height: 55px; line-height: 55px;  top: 479px; right:0px;  text-indent:12px;" class="opreabg">▼</div>
</div>
</body>
</html>
